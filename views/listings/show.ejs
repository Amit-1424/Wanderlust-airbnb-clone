<% layout("/layouts/boilerplate") %>

<div class="container mt-4">

  <div class="row">

    <!-- LEFT SIDE (Image + Details) -->
    <div class="col-md-9">

      <div class="row listing-show-wrapper shadow-sm">

        <!-- Image -->
        <div class="col-md-6 p-0">
          <img 
            src="<%= listing.image?.url || '/default.jpg' %>" 
            class="show-img"
            alt="listing image"
          >
        </div>

        <!-- Details -->
        <div class="col-md-6 p-4">
          <h3 class="fw-bold mb-2"><%= listing.title %></h3>

          <p class="text-muted mb-3">
            <%= listing.location %>, <%= listing.country %>
          </p>

          <h4 class="mb-3">
            &#8377 <%= listing.price.toLocaleString("en-IN") %>
          </h4>

          <hr>

          <p class="mb-4"><%= listing.description %></p>

          <div class="d-flex gap-3">
            <a href="/listings/<%= listing._id %>/edit"
              class="btn btn-outline-dark rounded-pill px-4">
              Edit
            </a>

            <form method="POST"
              action="/listings/<%= listing._id %>?_method=DELETE">
              <button class="btn btn-danger rounded-pill px-4">
                Delete
              </button>
            </form>
          </div>

        </div>

      </div>
    </div>


    <!-- RIGHT SIDE (Review Section) -->
    <div class="col-md-3">

      <div class="card shadow-sm p-3">

        <h5 class="mb-3">Add Review</h5>

        <form method="POST" action="">

          <!-- Rating -->
          <div class="mb-3">
            <label class="form-label">
              Rating: <span id="rating-value">3</span> ‚≠ê
            </label>

            <input 
              type="range"
              name="review[rating]"
              class="form-range"
              min="1"
              max="5"
              step="1"
              value="3"
              oninput="document.getElementById('rating-value').innerText = this.value"
            >
          </div>

          <!-- Comment -->
          <div class="mb-3">
            <label class="form-label">Comment</label>
            <textarea
              name="review[comment]"
              class="form-control"
              rows="3"
              placeholder="Write your review..."
              required
            ></textarea>
          </div>

          <button class="btn btn-dark w-100 rounded-pill">
            Submit Review
          </button>

        </form>

      </div>

    </div>

  </div>

</div>
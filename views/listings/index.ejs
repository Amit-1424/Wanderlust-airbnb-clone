<% layout("/layouts/boilerplate") %>



<!-- this sucess is from res.locals.sucess, (ejs templates mai req.locats.(anything) is directly acessed) -->
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">All Listings</h2>
        <a href="/listings/new" class="btn btn-dark rounded-pill px-4">
            + Add
        </a>
    </div>

    <div class="row g-4">
        <% for (let listing of allListings){ %>
            <div class="col-lg-3 col-md-4 col-sm-6">
                <div class="card listing-card h-100">
                    
                    <img 
                        src="<%= listing.image?.url || '/default.jpg' %>" 
                        class="card-img-top listing-img"
                        alt="listing image"
                    >

                    <div class="card-body p-3">
                        <h6 class="card-title mb-1 fw-semibold">
                            <%= listing.title %>
                        </h6>

                        <p class="small text-muted mb-1">
                            <%= listing.location %>, <%= listing.country %>
                        </p>

                        <p class="fw-bold mb-2">
                            &#8377 <%= listing.price.toLocaleString("en-IN") %>
                        </p>

                        <a href="/listings/<%= listing._id %>" 
                           class="stretched-link text-decoration-none"></a>
                    </div>
                </div>
            </div>
        <% } %>
    </div>
</div>